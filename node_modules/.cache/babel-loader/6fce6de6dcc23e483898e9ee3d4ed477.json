{"ast":null,"code":"import _defineProperty from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import api from'../../../../services/api';import{withRouter}from'react-router-dom';import swal from'sweetalert';var ProductList=/*#__PURE__*/function(_Component){_inherits(ProductList,_Component);function ProductList(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProductList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProductList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={error:null,products:[],response:{},msg:'',category:[]};return _this;}_createClass(ProductList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var category,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"/auth/category/\");case 2:category=_context.sent;_context.next=5;return api.get('/auth/product');case 5:response=_context.sent;console.log(response.data);if(response){this.setState({products:response.data});this.setState({category:category.data});}case 8:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"vay\",value:function(){var _vay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(productId){var id,res,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=productId;_context2.next=3;return api.delete(\"/auth/product/\".concat(id));case 3:res=_context2.sent;if(!res){_context2.next=9;break;}_context2.next=7;return api.get('/auth/product');case 7:payload=_context2.sent;if(payload){this.setState({products:payload.data});}case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function vay(_x){return _vay.apply(this,arguments);}return vay;}()},{key:\"deleteProduct\",value:function deleteProduct(productId){var _swal,_this2=this;swal((_swal={title:\"Você tem certeza?\",text:\"Seu Produto será deletado!\",icon:\"warning\",buttons:true},_defineProperty(_swal,\"buttons\",[\"Cancelar\",\"Deletar\"]),_defineProperty(_swal,\"dangerMode\",true),_swal)).then(function(willDelete){if(willDelete){_this2.vay(productId);_this2.setState({msg:'Produto deletado com sucesso.'});}});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,error=_this$state.error,products=_this$state.products,category=_this$state.category,msg=_this$state.msg;var filtro=document.getElementById('search');var tabela=document.getElementById('datatable');if(filtro!=null){filtro.onkeyup=function(){var nomeFiltro=filtro.value;for(var i=1;i<tabela.rows.length;i++){var conteudoCelula=tabela.rows[i].cells[0].innerText;var corresponde=conteudoCelula.indexOf(nomeFiltro)>=0;tabela.rows[i].style.display=corresponde?'':'none';}};}if(error){return React.createElement(\"div\",null,\"Error: \",error);}else{return React.createElement(\"div\",{className:\"home\"},React.createElement(\"div\",{className:\"row\"},this.state.msg!==''&&React.createElement(\"div\",{className:\"col s10 msg center ajuste\"},this.state.msg),React.createElement(\"div\",{className:\"col s2 right\"},React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/AddProduct\");},className:\"btn-flat btn-medium corPadrao right \"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"add\")))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col s12\"},React.createElement(\"div\",{className:\"card material-table\"},React.createElement(\"div\",{className:\"dataTabless_filter\"},React.createElement(\"label\",null,\"Busca de Produtos:\",React.createElement(\"input\",{type:\"search\",id:\"search\",placeholder:\"\",\"aria-controls\":\"datatable\"}))),React.createElement(\"table\",{id:\"datatable\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Nome\"),React.createElement(\"th\",null,\"Categoria\"),React.createElement(\"th\",null,\"Descri\\xE7\\xE3o\"),React.createElement(\"th\",null,\"Pre\\xE7o\"),React.createElement(\"th\",null,\"Ativo\"),React.createElement(\"th\",null,\"A\\xE7\\xF5es\"))),React.createElement(\"tbody\",null,products.map(function(product){return React.createElement(\"tr\",{key:product.id},React.createElement(\"td\",null,product.name),category.filter(function(category){return category.id===product.category_id;}).map(function(category){return React.createElement(\"td\",{key:category.id},category.title);}),React.createElement(\"td\",null,product.description),React.createElement(\"td\",null,product.price.toLocaleString('pt-br',{style:'currency',currency:'BRL'})),React.createElement(\"td\",null,product.active===1?'Ativo':'Inativo'),React.createElement(\"td\",null,React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/products/\".concat(product.id));}},React.createElement(\"div\",{className:\"btn-flat corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"edit\"))),\"\\xA0\",React.createElement(\"a\",{onClick:function onClick(){return _this3.deleteProduct(product.id,product.name);}},React.createElement(\"div\",{className:\"btn-flat corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"delete\")))));})))))));}}}]);return ProductList;}(Component);export default withRouter(ProductList);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/src/pages/App/components/product/ProductList.js"],"names":["React","Component","api","withRouter","swal","ProductList","state","error","products","response","msg","category","get","console","log","data","setState","productId","id","delete","res","payload","title","text","icon","buttons","then","willDelete","vay","filtro","document","getElementById","tabela","onkeyup","nomeFiltro","value","i","rows","length","conteudoCelula","cells","innerText","corresponde","indexOf","style","display","props","history","push","map","product","name","filter","category_id","description","price","toLocaleString","currency","active","deleteProduct"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport api from '../../../../services/api'\nimport { withRouter } from 'react-router-dom'\nimport swal from 'sweetalert';\n\nclass ProductList extends Component {\n  state = {\n      error: null,\n      products: [],\n      response: {},\n      msg: '',\n      category: []\n  }\n\n  async componentDidMount() {\n    const category = await api.get(`/auth/category/`);\n      const response = await api.get('/auth/product')\n      console.log(response.data)\n      if(response) {\n          this.setState({\n              products: response.data\n          })\n          this.setState({\n            category: category.data\n          })\n      }       \n  }\n\n  async vay (productId){\n    const id = productId;\n    const res = await api.delete(`/auth/product/${id}`);\n    if(res) {\n      const payload = await api.get('/auth/product')\n      if(payload) {\n          this.setState({\n              products: payload.data\n          })\n      }       \n    }\n  }\n\n  deleteProduct(productId) {\n    swal({\n      title: \"Você tem certeza?\",\n      text: \"Seu Produto será deletado!\",\n      icon: \"warning\",\n      buttons: true,\n      buttons: [\"Cancelar\", \"Deletar\"],\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        this.vay(productId)\n        this.setState({\n          msg: 'Produto deletado com sucesso.'\n        })\n      } \n    });\n  }\n\n  render() {\n    const { error, products, category, msg} = this.state;\n\n    const filtro = document.getElementById('search');\n    const tabela = document.getElementById('datatable');\n    if (filtro != null){\n        filtro.onkeyup = function() {\n        var nomeFiltro = filtro.value;\n            for (var i = 1; i < tabela.rows.length; i++) {\n                var conteudoCelula = tabela.rows[i].cells[0].innerText;\n                var corresponde = conteudoCelula.indexOf(nomeFiltro) >= 0;\n                tabela.rows[i].style.display = corresponde ? '' : 'none';\n            }\n        };\n    }\n  \n    if(error) {\n      return (\n        <div>Error: {error}</div>\n      )\n    } else {\n      return(\n        <div className=\"home\">\n        <div className=\"row\">\n\n        {this.state.msg !== '' &&\n          <div className=\"col s10 msg center ajuste\"> \n            {this.state.msg}\n          </div>\n        }\n          <div className=\"col s2 right\">\n            <a onClick={() => this.props.history.push(`/AddProduct`)} \n              className=\"btn-flat btn-medium corPadrao right \">\n              <i className=\"material-icons white-text\">add</i>\n            </a>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div  className=\"col s12\">\n            <div className=\"card material-table\">     \n            <div className=\"dataTabless_filter\">\n              <label>Busca de Produtos:<input type=\"search\" id=\"search\" placeholder=\"\" aria-controls=\"datatable\" />\n              </label>\n            </div>\n            <table id=\"datatable\">\n            <thead>\n              <tr>\n                <th>Nome</th>\n                <th>Categoria</th>\n                <th>Descrição</th>\n                <th>Preço</th>\n                <th>Ativo</th>\n                <th>Ações</th>\n              </tr>\n            </thead>\n            <tbody>\n            {products.map((product) => (  \n              <tr key={product.id}>\n                <td>{product.name}</td>\n                {category\n                .filter(category => category.id === product.category_id)\n                .map(category => (\n                  <td key={category.id}>{category.title}</td>\n                ))}\n                <td>{product.description}</td>\n                <td>{(product.price).toLocaleString('pt-br', {style: 'currency', currency: 'BRL'})}</td>\n                <td>{product.active === 1 ? 'Ativo' : 'Inativo'}</td>\n                <td>\n                  <a onClick={() => this.props.history.push(`/products/${product.id}`)}>\n                    <div className=\"btn-flat corPadrao darken-4\">\n                        <i className=\"material-icons white-text\">edit</i>\n                    </div>\n                  </a>\n                  &nbsp;\n                  <a  onClick={() => this.deleteProduct(product.id, product.name)}>\n                      <div className=\"btn-flat corPadrao darken-4\">\n                        <i className=\"material-icons white-text\">delete</i>\n                      </div>\n                  </a>\n                </td>\n              </tr>\n            ))}\n           </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n\n\n      </div>\n      )\n    }\n  }\n}\n\nexport default withRouter(ProductList);"]},"metadata":{},"sourceType":"module"}