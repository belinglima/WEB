{"ast":null,"code":"import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import api from'../../../../services/api';import{withRouter}from'react-router-dom';import swal from'sweetalert';import logo from'../../../../assets/user.png';var CategoryList=/*#__PURE__*/function(_Component){_inherits(CategoryList,_Component);function CategoryList(){var _getPrototypeOf2;var _this;_classCallCheck(this,CategoryList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CategoryList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={error:null,category:[],response:{},msg:'',mostraMsg:false};return _this;}_createClass(CategoryList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get('/auth/category/');case 2:response=_context.sent;this.setState({category:response.data});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"vay\",value:function(){var _vay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(categoryId){var id,res,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=categoryId;_context2.next=3;return api.delete(\"/auth/category/\".concat(id));case 3:res=_context2.sent;if(!res){_context2.next=9;break;}_context2.next=7;return api.get('/auth/category');case 7:payload=_context2.sent;if(payload){this.setState({category:payload.data});}case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function vay(_x){return _vay.apply(this,arguments);}return vay;}()},{key:\"deleteCategory\",value:function deleteCategory(productId){var _this2=this;swal({title:\"Você tem certeza?\",text:\"Sua Categoria será deletada e pode conter produtos, que tambem serão deletados!\",icon:\"warning\",buttons:[\"Cancelar\",\"Deletar\"],dangerMode:true}).then(function(willDelete){if(willDelete){_this2.vay(productId);_this2.setState({msg:'Categoria deletada com sucesso.'});}});}},{key:\"render\",value:function render(props){var _this3=this;var _this$state=this.state,error=_this$state.error,category=_this$state.category,mostraMsg=_this$state.mostraMsg,msg=_this$state.msg;if(error){return React.createElement(\"div\",null,\"Error: \",error);}else{return React.createElement(\"div\",{className:\"home\"},React.createElement(\"div\",{className:\"row\"},this.state.msg!==''&&React.createElement(\"div\",{className:\"col s10 msg center ajuste\"},this.state.msg),React.createElement(\"div\",{className:\"col s2 right\"},React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/AddCategory\");},className:\"btn-flat btn-medium corPadrao right \"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"add\")))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"row\"},category.map(function(category){return React.createElement(\"div\",{className:\"col s2 cardCategory\",key:category.id},React.createElement(\"div\",{className:\"card cardCategory\"},React.createElement(\"div\",{className:\"card-image center\"},React.createElement(\"img\",{className:\"card-img-top imgtamanho\",src:category.image[0]==null?logo:category.image[category.image.length-1].url,alt:'Foto de  '+category.title}),React.createElement(\"span\",{className:\"card-header red-text\"},category.title)),React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"a\",{onClick:function onClick(){return _this3.deleteCategory(category.id,category.title);},className:\"btn-flat halfway-fab right corPadrao\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"delete\")),\"\\xA0\",React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/category/\".concat(category.id));},className:\"btn-flat  halfway-fab corPadrao\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"edit\")))));}))));}}}]);return CategoryList;}(Component);export default withRouter(CategoryList);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/src/pages/App/components/category/CategoryList.js"],"names":["React","Component","api","withRouter","swal","logo","CategoryList","state","error","category","response","msg","mostraMsg","get","setState","data","categoryId","id","delete","res","payload","productId","title","text","icon","buttons","dangerMode","then","willDelete","vay","props","history","push","map","image","length","url","deleteCategory"],"mappings":"+9BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,GAAP,KAAgB,0BAAhB,CACA,OAASC,UAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,6BAAjB,C,GAEMC,CAAAA,Y,uZACFC,K,CAAQ,CACJC,KAAK,CAAE,IADH,CAEJC,QAAQ,CAAE,EAFN,CAGJC,QAAQ,CAAE,EAHN,CAIJC,GAAG,CAAE,EAJD,CAKJC,SAAS,CAAE,KALP,C,yUASeV,CAAAA,GAAG,CAACW,GAAJ,CAAQ,iBAAR,C,QAAjBH,Q,eAGF,KAAKI,QAAL,CAAc,CACVL,QAAQ,CAAEC,QAAQ,CAACK,IADT,CAAd,E,yRAMIC,U,yIACFC,E,CAAKD,U,wBACOd,CAAAA,GAAG,CAACgB,MAAJ,0BAA6BD,EAA7B,E,QAAZE,G,oBACHA,G,iDACqBjB,CAAAA,GAAG,CAACW,GAAJ,CAAQ,gBAAR,C,QAAhBO,O,gBACN,GAAGA,OAAH,CAAY,CACR,KAAKN,QAAL,CAAc,CACVL,QAAQ,CAAEW,OAAO,CAACL,IADR,CAAd,EAGH,C,wLAIUM,S,CAAW,iBACxBjB,IAAI,CAAC,CACHkB,KAAK,CAAE,mBADJ,CAEHC,IAAI,CAAE,iFAFH,CAGHC,IAAI,CAAE,SAHH,CAIHC,OAAO,CAAE,CAAC,UAAD,CAAa,SAAb,CAJN,CAKHC,UAAU,CAAE,IALT,CAAD,CAAJ,CAMGC,IANH,CAMQ,SAACC,UAAD,CAAgB,CACtB,GAAIA,UAAJ,CAAgB,CACd,MAAI,CAACC,GAAL,CAASR,SAAT,EACA,MAAI,CAACP,QAAL,CAAc,CACZH,GAAG,CAAE,iCADO,CAAd,EAGD,CACF,CAbD,EAcD,C,sCAEMmB,K,CAAO,iCACgC,KAAKvB,KADrC,CACJC,KADI,aACJA,KADI,CACGC,QADH,aACGA,QADH,CACaG,SADb,aACaA,SADb,CACwBD,GADxB,aACwBA,GADxB,CAEZ,GAAGH,KAAH,CAAU,CACR,MACE,0CAAaA,KAAb,CADF,CAGD,CAJD,IAIO,CACL,MACE,4BAAK,SAAS,CAAC,MAAf,EACE,2BAAK,SAAS,CAAC,KAAf,EAED,KAAKD,KAAL,CAAWI,GAAX,GAAmB,EAAnB,EACC,2BAAK,SAAS,CAAC,2BAAf,EACG,KAAKJ,KAAL,CAAWI,GADd,CAHA,CAOE,2BAAK,SAAS,CAAC,cAAf,EACE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACmB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,gBAAN,EAAZ,CACE,SAAS,CAAC,sCADZ,EAEE,yBAAG,SAAS,CAAC,2BAAb,QAFF,CADF,CAPF,CADF,CAeE,2BAAK,SAAS,CAAC,KAAf,EACE,2BAAK,SAAS,CAAC,KAAf,EACKvB,QAAQ,CAACwB,GAAT,CAAa,SAACxB,QAAD,QACd,4BAAK,SAAS,CAAC,qBAAf,CAAqC,GAAG,CAAEA,QAAQ,CAACQ,EAAnD,EACE,2BAAK,SAAS,CAAC,mBAAf,EACE,2BAAK,SAAS,CAAC,mBAAf,EACE,2BAAK,SAAS,CAAC,yBAAf,CACE,GAAG,CAAER,QAAQ,CAACyB,KAAT,CAAe,CAAf,GAAqB,IAArB,CAA4B7B,IAA5B,CAAmCI,QAAQ,CAACyB,KAAT,CAAezB,QAAQ,CAACyB,KAAT,CAAeC,MAAf,CAAuB,CAAtC,EAAyCC,GADnF,CACgH,GAAG,CAAE,YAAY3B,QAAQ,CAACa,KAD1I,EADF,CAIE,4BAAM,SAAS,CAAC,sBAAhB,EAAwCb,QAAQ,CAACa,KAAjD,CAJF,CADF,CAOE,2BAAK,SAAS,CAAC,cAAf,EACA,yBAAI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACe,cAAL,CAAoB5B,QAAQ,CAACQ,EAA7B,CAAiCR,QAAQ,CAACa,KAA1C,CAAN,EAAb,CACI,SAAS,CAAC,sCADd,EAEI,yBAAG,SAAS,CAAC,2BAAb,WAFJ,CADA,QAME,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACQ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,qBAAqCvB,QAAQ,CAACQ,EAA9C,EAAN,EAAZ,CACI,SAAS,CAAC,iCADd,EAEE,yBAAG,SAAS,CAAC,2BAAb,SAFF,CANF,CAPF,CADF,CADc,EAAb,CADL,CADF,CAfF,CADF,CA8CD,CACF,C,0BAvGwBhB,S,EA0G3B,cAAeE,CAAAA,UAAU,CAACG,YAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport api from '../../../../services/api'\nimport { withRouter} from 'react-router-dom'\nimport swal from 'sweetalert';\nimport logo from '../../../../assets/user.png'\n\nclass CategoryList extends Component {\n    state = {\n        error: null,\n        category: [],\n        response: {},\n        msg: '',\n        mostraMsg: false\n    }\n  \n  async componentDidMount() {\n    const response = await api.get('/auth/category/');\n\n\n        this.setState({\n            category: response.data\n        })\n     \n  }\n\n  async vay(categoryId) {\n    const id = categoryId;\n    const res = await api.delete(`/auth/category/${id}`);\n    if(res) {\n      const payload = await api.get('/auth/category')\n      if(payload) {\n          this.setState({\n              category: payload.data\n          })\n      }       \n    }\n  }\n\n  deleteCategory(productId) {\n    swal({\n      title: \"Você tem certeza?\",\n      text: \"Sua Categoria será deletada e pode conter produtos, que tambem serão deletados!\",\n      icon: \"warning\",\n      buttons: [\"Cancelar\", \"Deletar\"],\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        this.vay(productId)\n        this.setState({\n          msg: 'Categoria deletada com sucesso.'\n        })\n      } \n    });\n  }\n\n  render(props) {\n    const { error, category, mostraMsg, msg } = this.state;\n    if(error) {\n      return (\n        <div>Error: {error}</div>\n      )\n    } else {\n      return(\n        <div className=\"home\">\n          <div className=\"row\">\n\n        {this.state.msg !== '' &&\n          <div className=\"col s10 msg center ajuste\"> \n            {this.state.msg}\n          </div>\n        }\n            <div className=\"col s2 right\">\n              <a onClick={() => this.props.history.push(`/AddCategory`)} \n                className=\"btn-flat btn-medium corPadrao right \">\n                <i className=\"material-icons white-text\">add</i>\n              </a>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"row\">\n                {category.map((category) => (\n                <div className=\"col s2 cardCategory\" key={category.id}>\n                  <div className=\"card cardCategory\">\n                    <div className=\"card-image center\">\n                      <img className=\"card-img-top imgtamanho\" \n                        src={category.image[0] == null ? logo : category.image[category.image.length -1].url}                         alt={'Foto de  '+category.title} \n                      />\n                      <span className=\"card-header red-text\">{category.title}</span>\n                    </div>\n                    <div className=\"card-content\">\n                    <a  onClick={() => this.deleteCategory(category.id, category.title)}\n                        className=\"btn-flat halfway-fab right corPadrao\">\n                        <i className=\"material-icons white-text\">delete</i>\n                      </a>\n                      &nbsp;\n                      <a onClick={() => this.props.history.push(`/category/${category.id}`)}\n                          className=\"btn-flat  halfway-fab corPadrao\">\n                        <i className=\"material-icons white-text\">edit</i>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n        </div>\n      )\n    }\n  }\n}\n\nexport default withRouter(CategoryList);"]},"metadata":{},"sourceType":"module"}