{"ast":null,"code":"import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import api from'../../../../services/api';import Sidebar from'../fixedComponents/sidebar';import logo from'../../../../assets/user.png';var categoryEdit=/*#__PURE__*/function(_Component){_inherits(categoryEdit,_Component);function categoryEdit(){var _getPrototypeOf2;var _this;_classCallCheck(this,categoryEdit);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(categoryEdit)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={error:null,msg:'',category:[],id:'',title:'',description:'',active:'',mostraMsg:false,image:'',imagee:'',chegou:false};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleImageChange=function(e){_this.setState({imagee:e.target.files[0]});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// console.log(this.state);\nid=_this.props.match.params.id;_context.next=4;return api.put(\"/auth/category/\".concat(id),{id:_this.state.id,title:_this.state.title,description:_this.state.description,active:_this.state.active}).then(function(res){_this.setState({mostraMsg:true,msg:'Cadastrada com sucesso!'});var form_data=new FormData();form_data.append('image[]',_this.state.imagee);api.post(\"/auth/category/\".concat(res.data.id,\"/images\"),form_data,{headers:{'content-type':'multipart/form-data'}}).catch(function(err){return console.log(err);});});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(categoryEdit,[{key:\"componentDidMount\",// handleSubmit = async e => {\n//     e.preventDefault();\n//     // console.log(this.state);\n//     let form_data = new FormData();\n//     const { id }  = this.props.match.params;\n//     form_data.append('image[]', this.state.imagee);\n//     api.post(`/auth/category/${id}/images`, form_data, {\n//       headers: {\n//         'content-type': 'multipart/form-data'\n//       }\n//     })\n//     .then(res => {\n//       this.setState({\n//         chegou: true\n//       })\n//     })\n//     .catch(err => console.log(err))\n//     if(this.state.chegou){  \n//       await api.put(`/auth/category/${id}`,\n//       {id:this.state.id,\n//         title:this.state.title,\n//         description:this.state.description,\n//         active:this.state.active\n//       });\n//       this.setState({\n//         mostraMsg: true,\n//         msg: 'atualizada com sucesso!'\n//       })     \n//     } \n// }      \nvalue:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var id,response,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=this.props.match.params.id;_context2.next=3;return api.get(\"/auth/category/\".concat(id));case 3:response=_context2.sent;_context2.next=6;return api.get('/auth/category');case 6:res=_context2.sent;// console.log(response.data.image[response.data.image.length -1].url)\nif(response){this.setState({id:response.data.id,title:response.data.title,description:response.data.description,active:response.data.active,image:response.data.image});this.setState({category:res.data});}case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this$state=this.state,error=_this$state.error,msg=_this$state.msg,mostraMsg=_this$state.mostraMsg,image=_this$state.image;if(error){return React.createElement(\"div\",null,\"Error: \",error);}else{return React.createElement(\"div\",null,React.createElement(Sidebar,null),React.createElement(\"div\",{className:\"home\"},React.createElement(\"div\",{className:\"card diminui\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col s8\"},React.createElement(\"h4\",{className:\"corPadrao white-text teste right\"},\"Editar Categoria\"),React.createElement(\"form\",{className:\"col s12\",onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"input-field col s12 tt\"},React.createElement(\"i\",{className:\"material-icons prefix\"},\"bookmarks\"),React.createElement(\"input\",{id:\"account_circle\",type:\"text\",className:\"validate\",value:this.state.title,onChange:this.handleChange,required:true,placeholder:\"Nome da Categoria\",name:\"title\"}),React.createElement(\"label\",{className:\"active\",id:\"account_circle\"},\"Categoria\")),React.createElement(\"div\",{className:\"row\"},React.createElement(\"label\",{className:\"corPadrao white-text\"},\"Logo da Categoria\"),React.createElement(\"div\",{className:\"file-field input-field\"},React.createElement(\"div\",{className:\"btn corPadrao\"},React.createElement(\"span\",null,\"Selecionar\"),React.createElement(\"input\",{type:\"file\",name:\"image[]\",accept:\"image/png, image/jpeg\",onChange:this.handleImageChange,required:true})),React.createElement(\"div\",{className:\"file-path-wrapper\"},React.createElement(\"input\",{className:\"file-path validate\",type:\"text\",placeholder:\"Upload file\",required:true})))),React.createElement(\"div\",{className:\"col s2 right\"},React.createElement(\"img\",{className:\"card-img-top imgs\",src:image==''?logo:image[image.length-1].url,style:{width:'5rem',height:'5rem',borderRadius:'25rem',marginRight:'55px'},alt:'Foto de  '+this.state.title})),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col right s1.0\"},React.createElement(\"button\",{type:\"submit\",className:\"btn-flat btn-medium corPadrao right \"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"save\")),\"\\xA0\",React.createElement(\"a\",{onClick:this.props.history.goBack,className:\"btn-flat btn-medium corPadrao left \"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"keyboard_arrow_left\"))),React.createElement(\"div\",{className:\"col s10\"},mostraMsg?React.createElement(\"div\",{className:\"msgg\"},msg):''),React.createElement(\"br\",null))))))));}}}]);return categoryEdit;}(Component);export default withRouter(categoryEdit);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/src/pages/App/components/category/categoryEdit.js"],"names":["React","Component","withRouter","api","Sidebar","logo","categoryEdit","state","error","msg","category","id","title","description","active","mostraMsg","image","imagee","chegou","handleChange","e","setState","target","name","value","handleImageChange","files","handleSubmit","preventDefault","props","match","params","put","then","res","form_data","FormData","append","post","data","headers","catch","err","console","log","get","response","length","url","width","height","borderRadius","marginRight","history","goBack"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {withRouter}  from 'react-router-dom'\nimport api from '../../../../services/api'\nimport Sidebar from '../fixedComponents/sidebar';\nimport logo from '../../../../assets/user.png'\n\nclass categoryEdit extends Component {\n        state = {\n            error: null,\n            msg: '',\n            category: [],\n            id: '',\n            title: '',\n            description: '',\n            active: '',\n            mostraMsg: false,\n            image: '',\n            imagee: '',\n            chegou: false\n        }   \n    \n        handleChange = e => {\n            this.setState({\n              [e.target.name]: e.target.value\n            })\n          }\n\n        handleImageChange = (e) => {\n          this.setState({\n            imagee: e.target.files[0]\n          })\n        };\n\n        handleSubmit = async e => {\n          e.preventDefault();\n          // console.log(this.state);\n          const { id }  = this.props.match.params;\n     \n          await api.put(`/auth/category/${id}`,\n          {\n            id:this.state.id,\n            title:this.state.title,\n            description:this.state.description,\n            active:this.state.active\n          })\n          .then(res => {\n            this.setState({\n              mostraMsg: true,\n              msg: 'Cadastrada com sucesso!'\n            })  \n\n            let form_data = new FormData();\n            form_data.append('image[]', this.state.imagee);\n            api.post(`/auth/category/${res.data.id}/images`, form_data, {\n              headers: {\n                'content-type': 'multipart/form-data'\n              }\n            })\n            .catch(err => console.log(err))\n          })\n        }\n        \n        // handleSubmit = async e => {\n        //     e.preventDefault();\n        //     // console.log(this.state);\n        //     let form_data = new FormData();\n        //     const { id }  = this.props.match.params;\n\n        //     form_data.append('image[]', this.state.imagee);\n        //     api.post(`/auth/category/${id}/images`, form_data, {\n        //       headers: {\n        //         'content-type': 'multipart/form-data'\n        //       }\n        //     })\n        //     .then(res => {\n        //       this.setState({\n        //         chegou: true\n        //       })\n        //     })\n        //     .catch(err => console.log(err))\n            \n\n        //     if(this.state.chegou){  \n        //       await api.put(`/auth/category/${id}`,\n        //       {id:this.state.id,\n        //         title:this.state.title,\n        //         description:this.state.description,\n        //         active:this.state.active\n        //       });\n        //       this.setState({\n        //         mostraMsg: true,\n        //         msg: 'atualizada com sucesso!'\n        //       })     \n        //     } \n        // }      \n\n        async componentDidMount() {\n          const { id } = this.props.match.params;\n          const response = await api.get(`/auth/category/${id}`);\n          const res = await api.get('/auth/category')\n          // console.log(response.data.image[response.data.image.length -1].url)\n          if(response) {\n              this.setState({\n                  id: response.data.id,\n                  title: response.data.title,\n                  description: response.data.description,\n                  active: response.data.active,\n                  image: response.data.image\n              })\n              this.setState({\n                  category: res.data\n              })\n          }      \n        }\n          render() {\n            const { error, msg, mostraMsg, image } = this.state;\n            if(error) {\n                return(\n                    <div>Error: {error}</div>\n                )\n            } else {\n                return(\n                <div>\n                <Sidebar />\n                <div className=\"home\">\n                    <div className=\"card diminui\">\n                      <div className=\"row\">\n                        <div className=\"col s8\">\n                           <h4 className=\"corPadrao white-text teste right\">Editar Categoria</h4>\n                          <form className=\"col s12\" onSubmit={this.handleSubmit}>\n                      \n                              <div className=\"input-field col s12 tt\">\n                                <i className=\"material-icons prefix\">bookmarks</i>\n                                <input id=\"account_circle\" type=\"text\" className=\"validate\"\n                                    value={this.state.title}\n                                    onChange={this.handleChange}\n                                    required\n                                    placeholder=\"Nome da Categoria\"\n                                    name=\"title\"\n                                />\n                                <label className=\"active\" id=\"account_circle\">Categoria</label>\n                              </div>\n                             \n                              <div className = \"row\">\n                                <label className=\"corPadrao white-text\">Logo da Categoria</label>\n                                <div className = \"file-field input-field\">\n                                    <div className = \"btn corPadrao\">\n                                      <span>Selecionar</span>\n                                      <input type = \"file\" \n                                          name=\"image[]\"\n                                          accept=\"image/png, image/jpeg\"  \n                                          onChange={this.handleImageChange} \n                                          required\n                                        />\n                                    </div>\n                                    \n                                    <div className = \"file-path-wrapper\">\n                                      <input className = \"file-path validate\" type = \"text\"\n                                        placeholder = \"Upload file\" \n                                          required\n                                        />\n                                    </div>\n                                </div>\n                              </div>\n\n                            <div className=\"col s2 right\">\n                                <img className=\"card-img-top imgs\" \n                                    src={image == '' ? logo : image[image.length -1].url}\n                                    style={{ width: '5rem', height: '5rem', borderRadius: '25rem', marginRight: '55px' }} \n                                    alt={'Foto de  ' +this.state.title} \n                                />\n                            </div>\n                           \n                            <div className=\"row\">\n                              <div className=\"col right s1.0\">\n                                  <button  type=\"submit\" \n                                      className=\"btn-flat btn-medium corPadrao right \">\n                                      <i className=\"material-icons white-text\">save</i>\n                                  </button>\n                                  &nbsp;\n                                  <a  onClick={this.props.history.goBack}\n                                      className=\"btn-flat btn-medium corPadrao left \">\n                                      <i className=\"material-icons white-text\">keyboard_arrow_left</i>\n                                  </a>\n                              </div>\n                              <div className=\"col s10\">\n                                  { mostraMsg ?  <div className=\"msgg\">{ msg }</div> : ''}\n                              </div>\n                              <br />\n                            </div>\n                          </form>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>  \n            )\n        }\n    }\n}\n        \n\n\nexport default withRouter(categoryEdit)"]},"metadata":{},"sourceType":"module"}