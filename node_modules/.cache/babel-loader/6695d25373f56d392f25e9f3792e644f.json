{"ast":null,"code":"import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Link,withRouter}from\"react-router-dom\";import Logo from\"../../assets/logo.png\";import api from\"../../services/api\";import{login,logout}from\"../../services/auth\";var SignIn=/*#__PURE__*/function(_Component){_inherits(SignIn,_Component);function SignIn(){var _getPrototypeOf2;var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={email:\"\",password:\"\",error:\"\"};_this.handleSignIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,email,password,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,email=_this$state.email,password=_this$state.password;if(!(!email||!password)){_context.next=6;break;}_this.setState({error:\"Preencha ( E-Mail e Senha ) para continuar!\"});_context.next=16;break;case 6:_context.prev=6;_context.next=9;return api.post(\"/sessions\",{email:email,password:password});case 9:response=_context.sent;if(response.data.isAdmin===1){login(response.data.token.token);localStorage.setItem('nome',response.data.nome);_this.props.history.push(\"/app\");}else{_this.setState({error:'Somente Administrador pode entrar Aqui.'});}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);_this.setState({error:\"Houve um problema com o login.\"});case 16:case\"end\":return _context.stop();}}},_callee,null,[[6,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var _this2=this;logout();return React.createElement(\"div\",{className:\"container centered\"},React.createElement(\"div\",{className:\"col s12 login\"},React.createElement(\"div\",{className:\"card darken-1 c\"},React.createElement(\"div\",{className:\"card-content white-text\"},React.createElement(\"form\",{onSubmit:this.handleSignIn},React.createElement(\"img\",{src:Logo,alt:\"logo\",className:\"imgLogin\"}),React.createElement(\"div\",null,React.createElement(\"input\",{type:\"email\",className:\"browser-default input\",placeholder:\"Endere\\xE7o de e-mail\",onChange:function onChange(e){return _this2.setState({email:e.target.value});}}),React.createElement(\"input\",{type:\"password\",placeholder:\"Senha\",className:\"browser-default input\",onChange:function onChange(e){return _this2.setState({password:e.target.value});}})),React.createElement(\"button\",{type:\"submit\",className:\"bowser-default button\"},\"Entrar\"),React.createElement(Link,{className:\"links\",to:\"/forgot\"},\"Esqueceu a Senha?\")))),this.state.error?React.createElement(\"div\",{className:\"msg\"},this.state.error):''));}}]);return SignIn;}(Component);export default withRouter(SignIn);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/src/pages/SignIn/index.js"],"names":["React","Component","Link","withRouter","Logo","api","login","logout","SignIn","state","email","password","error","handleSignIn","e","preventDefault","setState","post","response","data","isAdmin","token","localStorage","setItem","nome","props","history","push","target","value"],"mappings":"+9BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,qBAA9B,C,GAGMC,CAAAA,M,+XACJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,QAAQ,CAAE,EAFJ,CAGNC,KAAK,CAAE,EAHD,C,OAMRC,Y,0FAAe,iBAAMC,CAAN,0JACbA,CAAC,CAACC,cAAF,GADa,YAEe,MAAKN,KAFpB,CAELC,KAFK,aAELA,KAFK,CAEEC,QAFF,aAEEA,QAFF,MAGT,CAACD,KAAD,EAAU,CAACC,QAHF,0BAIX,MAAKK,QAAL,CAAc,CAAEJ,KAAK,CAAE,6CAAT,CAAd,EAJW,oEAOcP,CAAAA,GAAG,CAACY,IAAJ,CAAS,WAAT,CAAsB,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAtB,CAPd,QAOHO,QAPG,eAQT,GAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAd,GAA0B,CAA9B,CAAgC,CAC9Bd,KAAK,CAACY,QAAQ,CAACC,IAAT,CAAcE,KAAd,CAAoBA,KAArB,CAAL,CACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BL,QAAQ,CAACC,IAAT,CAAcK,IAA3C,EACA,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB,EACD,CAJD,IAIM,CACJ,MAAKX,QAAL,CAAc,CACZJ,KAAK,CAAE,yCADK,CAAd,EAGD,CAhBQ,iFAkBT,MAAKI,QAAL,CAAc,CACZJ,KAAK,CACH,gCAFU,CAAd,EAlBS,qE,uIA0BN,iBACVL,MAAM,GACH,MACE,4BAAK,SAAS,CAAC,oBAAf,EACE,2BAAK,SAAS,CAAC,eAAf,EACE,2BAAK,SAAS,CAAC,iBAAf,EACE,2BAAK,SAAS,CAAC,yBAAf,EACG,4BAAM,QAAQ,CAAE,KAAKM,YAArB,EACC,2BAAK,GAAG,CAAET,IAAV,CAAgB,GAAG,CAAC,MAApB,CAA2B,SAAS,CAAC,UAArC,EADD,CAEC,+BACE,6BACI,IAAI,CAAC,OADT,CAEI,SAAS,CAAC,uBAFd,CAGI,WAAW,CAAC,uBAHhB,CAII,QAAQ,CAAE,kBAAAU,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEN,KAAK,CAAEI,CAAC,CAACc,MAAF,CAASC,KAAlB,CAAd,CAAJ,EAJf,EADF,CAOI,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,OAFd,CAGE,SAAS,CAAC,uBAHZ,CAIE,QAAQ,CAAE,kBAAAf,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEL,QAAQ,CAAEG,CAAC,CAACc,MAAF,CAASC,KAArB,CAAd,CAAJ,EAJb,EAPJ,CAFD,CAgBG,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,uBAAhC,WAhBH,CAkBG,oBAAC,IAAD,EAAM,SAAS,CAAC,OAAhB,CAAwB,EAAE,CAAC,SAA3B,sBAlBH,CADH,CADF,CADF,CA2BI,KAAKpB,KAAL,CAAWG,KAAX,CACF,2BAAK,SAAS,CAAC,KAAf,EACG,KAAKH,KAAL,CAAWG,KADd,CADE,CAIA,EA/BJ,CADF,CADF,CAqCD,C,oBAxEkBX,S,EA2ErB,cAAeE,CAAAA,UAAU,CAACK,MAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Logo from \"../../assets/logo.png\";\nimport api from \"../../services/api\";\nimport { login, logout } from \"../../services/auth\";\n\n\nclass SignIn extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    error: \"\"\n  };\n\n  handleSignIn = async e => {\n    e.preventDefault();\n    const { email, password } = this.state;\n    if (!email || !password) {\n      this.setState({ error: \"Preencha ( E-Mail e Senha ) para continuar!\" });\n    } else {\n      try {\n        const response = await api.post(\"/sessions\", { email, password });\n        if (response.data.isAdmin === 1){\n          login(response.data.token.token);\n          localStorage.setItem('nome', response.data.nome);\n          this.props.history.push(\"/app\");\n        }else {\n          this.setState({\n            error: 'Somente Administrador pode entrar Aqui.'\n          })\n        }\n      } catch (err) {\n        this.setState({\n          error:\n            \"Houve um problema com o login.\"\n        });\n      }\n    }\n  };\n\n  render() {\n\tlogout();\n    return (\n      <div className=\"container centered\">\n        <div className=\"col s12 login\">\n          <div className=\"card darken-1 c\">\n            <div className=\"card-content white-text\">\n               <form onSubmit={this.handleSignIn}>\n                <img src={Logo} alt=\"logo\" className=\"imgLogin\" />\n                <div>\n                  <input\n                      type=\"email\"\n                      className=\"browser-default input\"\n                      placeholder=\"EndereÃ§o de e-mail\"\n                      onChange={e => this.setState({ email: e.target.value })}\n                    />\n                    <input\n                      type=\"password\"\n                      placeholder=\"Senha\"\n                      className=\"browser-default input\"\n                      onChange={e => this.setState({ password: e.target.value })}\n                    />\n                </div>\n                  <button type=\"submit\" className=\"bowser-default button\" >Entrar</button>\n\n                  <Link className=\"links\" to=\"/forgot\">Esqueceu a Senha?</Link>\n              </form>\n              \n            </div>\n\n          </div>\n          { this.state.error ? \n          <div className=\"msg\">\n            {this.state.error}\n          </div>\n          : ''}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(SignIn);"]},"metadata":{},"sourceType":"module"}