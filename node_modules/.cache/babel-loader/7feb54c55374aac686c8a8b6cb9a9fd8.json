{"ast":null,"code":"var _jsxFileName = \"/home/belinglima/MEGAsync/TCC/Projetos/PizzaBreak/web/src/pages/App/components/order/OrderList.js\";\nimport React, { Component } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport api from '../../../../services/api';\n\nclass OrderList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      orders: [],\n      users: [],\n      contagem: '',\n      detalha: []\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const res = await api.get('/auth/user');\n    const response = await api.get('/auth/order');\n\n    if (response) {\n      this.setState({\n        orders: response.data,\n        contagem: response.data\n      });\n      this.setState({\n        users: res.data\n      });\n    }\n  }\n\n  async detalhaProduto(order_id) {\n    const response = await api.get(\"/auth/order/\".concat(order_id));\n\n    if (response) {\n      this.setState({\n        detalha: response.data\n      });\n    }\n\n    console.log(this.state.detalha);\n  }\n\n  async entrega(orderId) {\n    const id = orderId;\n    const motivo = await api.post(\"/auth/order/\".concat(id), {\n      motivo: this.state.motivo,\n      status: \"DELIVERED\"\n    });\n\n    if (motivo) {\n      const payload = await api.get('/auth/order');\n\n      if (payload) {\n        this.setState({\n          orders: payload.data\n        });\n      }\n    }\n  }\n\n  async deletaOrder(orderId) {\n    const id = orderId;\n    console.log(this.state.motivo);\n    const motivo = await api.post(\"/auth/order/\".concat(id), {\n      motivo: this.state.motivo,\n      status: \"CANCELED\"\n    });\n    const apaga = await api.delete(\"/auth/order/\".concat(id));\n\n    if (apaga && motivo) {\n      const payload = await api.get('/auth/order');\n\n      if (payload) {\n        this.setState({\n          orders: payload.data\n        });\n      }\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          users = _this$state.users,\n          orders = _this$state.orders,\n          detalha = _this$state.detalha;\n    return React.createElement(\"div\", {\n      className: \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(ReactTooltip, {\n      place: \"right\",\n      type: \"dark\",\n      effect: \"solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Central de pedidos\")), React.createElement(\"div\", {\n      className: \"col s6 left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"highlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Pedido\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Cliente\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Forma Pagamento\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Total R$\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Troco R$\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"A\\xE7\\xF5es\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, orders.map(order => order.status === 'PENDING' ? React.createElement(\"tr\", {\n      key: order.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"0\", order.id), users.filter(users => users.id === order.user_id).map(users => React.createElement(\"td\", {\n      key: users.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, users.name)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, order.status), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, order.change.toLocaleString('pt-br', {\n      style: 'currency',\n      currency: 'BRL'\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, order.change.toLocaleString('pt-br', {\n      style: 'currency',\n      currency: 'BRL'\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: () => this.detalhaProduto(order.id),\n      rel: \"modal:open\",\n      href: \"#detalha\",\n      \"data-id\": order.id,\n      \"data-tip\": \"Detalhes\",\n      \"data-place\": \"left\",\n      \"data-effect\": \"solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn-flat corPadrao darken-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons white-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"more\"))), \"\\xA0\", React.createElement(\"a\", {\n      onClick: () => this.entrega(order.id),\n      \"data-tip\": \"Entregar\",\n      \"data-place\": \"bottom\",\n      \"data-effect\": \"solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn-flat corPadrao darken-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons white-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"motorcycle\"))), \"\\xA0 \\xA0\", React.createElement(\"a\", {\n      rel: \"modal:open\",\n      href: \"#cancela\",\n      \"data-id\": order.id,\n      \"data-tip\": \"Cancelar Pedido\",\n      \"data-place\": \"right\",\n      \"data-effect\": \"solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn-flat corPadrao darken-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons white-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"cancel\"))))) : '')))), React.createElement(\"div\", {\n      className: \"col s6 right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card ajuste\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Pedidos Aguardando Entrega!\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"bolinha\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"0 \", this.state.orders.status === 'PENDING' ? \"020\" : \"021\"))), React.createElement(\"div\", {\n      className: \"modal tamanho\",\n      id: \"detalha\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Detalhes do Pedido\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tabelinha\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"striped\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Produto\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Quantidade\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Vlr Unit.\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, this.state.detalha == '' ? '' : detalha.products.map(d => React.createElement(\"tr\", {\n      key: d.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, d.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, d.description), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, d.price)))))))), React.createElement(\"div\", {\n      className: \"modal tamanho\",\n      id: \"cancela\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Cancelar Pedido N\\xBA 574\"), React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons prefix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"cancel\"), React.createElement(\"textarea\", {\n      className: \"validate\",\n      name: \"motivo\",\n      value: this.state.motivo,\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Motivo do Cancelamento\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      onClick: () => this.deletaOrdera(),\n      className: \"right\",\n      \"data-tip\": \"Cancelar Agora\",\n      \"data-place\": \"right\",\n      \"data-effect\": \"solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn-flat corPadrao darken-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons white-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"cancel\")))))));\n  }\n\n}\n\nexport default OrderList;","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/PizzaBreak/web/src/pages/App/components/order/OrderList.js"],"names":["React","Component","ReactTooltip","api","OrderList","state","orders","users","contagem","detalha","handleChange","e","setState","target","name","value","componentDidMount","res","get","response","data","detalhaProduto","order_id","console","log","entrega","orderId","id","motivo","post","status","payload","deletaOrder","apaga","delete","render","map","order","filter","user_id","change","toLocaleString","style","currency","products","d","description","price","deletaOrdera"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,OAAOC,GAAP,MAAgB,0BAAhB;;AAEA,MAAMC,SAAN,SAAwBH,SAAxB,CAAiC;AAAA;AAAA;AAAA,SAE/BI,KAF+B,GAEvB;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,KAAK,EAAE,EAFD;AAGNC,MAAAA,QAAQ,EAAE,EAHJ;AAINC,MAAAA,OAAO,EAAE;AAJH,KAFuB;;AAAA,SAS/BC,YAT+B,GAShBC,CAAC,IAAI;AAClB,WAAKC,QAAL,CAAc;AACZ,SAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AADd,OAAd;AAGD,KAb8B;AAAA;;AAe/B,QAAMC,iBAAN,GAA0B;AACxB,UAAMC,GAAG,GAAG,MAAMd,GAAG,CAACe,GAAJ,CAAQ,YAAR,CAAlB;AACA,UAAMC,QAAQ,GAAG,MAAMhB,GAAG,CAACe,GAAJ,CAAQ,aAAR,CAAvB;;AACA,QAAGC,QAAH,EAAa;AACX,WAAKP,QAAL,CAAc;AACVN,QAAAA,MAAM,EAAEa,QAAQ,CAACC,IADP;AAEVZ,QAAAA,QAAQ,EAAEW,QAAQ,CAACC;AAFT,OAAd;AAIA,WAAKR,QAAL,CAAc;AACZL,QAAAA,KAAK,EAAEU,GAAG,CAACG;AADC,OAAd;AAGD;AACF;;AAED,QAAMC,cAAN,CAAqBC,QAArB,EAA+B;AAC7B,UAAMH,QAAQ,GAAG,MAAMhB,GAAG,CAACe,GAAJ,uBAAuBI,QAAvB,EAAvB;;AACE,QAAGH,QAAH,EAAa;AACX,WAAKP,QAAL,CAAc;AACZH,QAAAA,OAAO,EAAEU,QAAQ,CAACC;AADN,OAAd;AAGD;;AACDG,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKnB,KAAL,CAAWI,OAAvB;AACH;;AAED,QAAMgB,OAAN,CAAcC,OAAd,EAAuB;AACrB,UAAMC,EAAE,GAAGD,OAAX;AACA,UAAME,MAAM,GAAG,MAAMzB,GAAG,CAAC0B,IAAJ,uBAAwBF,EAAxB,GAA6B;AAChDC,MAAAA,MAAM,EAAE,KAAKvB,KAAL,CAAWuB,MAD6B;AAEhDE,MAAAA,MAAM,EAAE;AAFwC,KAA7B,CAArB;;AAKA,QAAGF,MAAH,EAAW;AACT,YAAMG,OAAO,GAAG,MAAM5B,GAAG,CAACe,GAAJ,CAAQ,aAAR,CAAtB;;AACA,UAAGa,OAAH,EAAY;AACV,aAAKnB,QAAL,CAAc;AACVN,UAAAA,MAAM,EAAEyB,OAAO,CAACX;AADN,SAAd;AAGD;AACF;AACF;;AAED,QAAMY,WAAN,CAAmBN,OAAnB,EAA2B;AACzB,UAAMC,EAAE,GAAGD,OAAX;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKnB,KAAL,CAAWuB,MAAvB;AACA,UAAMA,MAAM,GAAG,MAAMzB,GAAG,CAAC0B,IAAJ,uBAAwBF,EAAxB,GAA6B;AAChDC,MAAAA,MAAM,EAAE,KAAKvB,KAAL,CAAWuB,MAD6B;AAEhDE,MAAAA,MAAM,EAAE;AAFwC,KAA7B,CAArB;AAKA,UAAMG,KAAK,GAAG,MAAM9B,GAAG,CAAC+B,MAAJ,uBAA0BP,EAA1B,EAApB;;AACA,QAAGM,KAAK,IAAIL,MAAZ,EAAoB;AAClB,YAAMG,OAAO,GAAG,MAAM5B,GAAG,CAACe,GAAJ,CAAQ,aAAR,CAAtB;;AACA,UAAGa,OAAH,EAAY;AACV,aAAKnB,QAAL,CAAc;AACVN,UAAAA,MAAM,EAAEyB,OAAO,CAACX;AADN,SAAd;AAGD;AACF;AACF;;AAEDe,EAAAA,MAAM,GAAG;AAAA,wBAC4B,KAAK9B,KADjC;AAAA,UACCE,KADD,eACCA,KADD;AAAA,UACQD,MADR,eACQA,MADR;AAAA,UACgBG,OADhB,eACgBA,OADhB;AAEP,WACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AAAc,MAAA,KAAK,EAAC,OAApB;AAA4B,MAAA,IAAI,EAAC,MAAjC;AAAwC,MAAA,MAAM,EAAC,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAGE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAzB,CAHF,EAIE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,SAAS,EAAC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANF,CADF,CADF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAECH,MAAM,CAAC8B,GAAP,CAAaC,KAAD,IACXA,KAAK,CAACP,MAAN,KAAiB,SAAjB,GACA;AAAI,MAAA,GAAG,EAAEO,KAAK,CAACV,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAMU,KAAK,CAACV,EAAZ,CADJ,EAEOpB,KAAK,CACL+B,MADA,CACO/B,KAAK,IAAIA,KAAK,CAACoB,EAAN,KAAaU,KAAK,CAACE,OADnC,EAEAH,GAFA,CAEI7B,KAAK,IACR;AAAI,MAAA,GAAG,EAAEA,KAAK,CAACoB,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoBpB,KAAK,CAACO,IAA1B,CAHD,CAFP,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKuB,KAAK,CAACP,MAAX,CAPJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMO,KAAK,CAACG,MAAP,CAAeC,cAAf,CAA8B,OAA9B,EAAuC;AAACC,MAAAA,KAAK,EAAE,UAAR;AAAoBC,MAAAA,QAAQ,EAAE;AAA9B,KAAvC,CAAL,CARJ,EASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMN,KAAK,CAACG,MAAP,CAAeC,cAAf,CAA8B,OAA9B,EAAuC;AAACC,MAAAA,KAAK,EAAE,UAAR;AAAoBC,MAAAA,QAAQ,EAAE;AAA9B,KAAvC,CAAL,CATJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,OAAO,EAAE,MAAM,KAAKtB,cAAL,CAAoBgB,KAAK,CAACV,EAA1B,CAAlB;AACE,MAAA,GAAG,EAAC,YADN;AACmB,MAAA,IAAI,EAAC,UADxB;AACmC,iBAASU,KAAK,CAACV,EADlD;AACsD,kBAAS,UAD/D;AAC0E,oBAAW,MADrF;AAC4F,qBAAY,OADxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AAAK,MAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAFF,CADA,UAQA;AAAI,MAAA,OAAO,EAAE,MAAM,KAAKF,OAAL,CAAaY,KAAK,CAACV,EAAnB,CAAnB;AACE,kBAAS,UADX;AACsB,oBAAW,QADjC;AAC0C,qBAAY,OADtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AAAK,MAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CAFF,CARA,eAgBA;AAAG,MAAA,GAAG,EAAC,YAAP;AAAoB,MAAA,IAAI,EAAC,UAAzB;AAAoC,iBAASU,KAAK,CAACV,EAAnD;AAAuD,kBAAS,iBAAhE;AAAkF,oBAAW,OAA7F;AAAqG,qBAAY,OAAjH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,CAhBA,CAVJ,CADA,GAkCE,EAnCH,CAFD,CAXF,CADF,CAJF,EA4DE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAG,MAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA0B,KAAKtB,KAAL,CAAWC,MAAX,CAAkBwB,MAAlB,KAA6B,SAA7B,GAAyC,KAAzC,GAAiD,KAA3E,CAHF,CADF,CA5DF,EAsEE;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,EAAE,EAAC,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAO,MAAA,SAAS,EAAC,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAHF,CADF,CADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEG,KAAKzB,KAAL,CAAWI,OAAX,IAAsB,EAAtB,GAA2B,EAA3B,GACCA,OAAO,CAACmC,QAAR,CAAiBR,GAAjB,CAAqBS,CAAC,IACpB;AAAI,MAAA,GAAG,EAAEA,CAAC,CAAClB,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKkB,CAAC,CAAC/B,IAAP,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK+B,CAAC,CAACC,WAAP,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,CAAC,CAACE,KAAP,CAHF,CADF,CAHJ,CARF,CADA,CADF,CAJF,CAtEF,EAuGE;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,EAAE,EAAC,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADJ,EAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,uBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEI;AAAU,MAAA,SAAS,EAAC,UAApB;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWuB,MAFpB;AAGE,MAAA,QAAQ,EAAE,KAAKlB,YAHjB;AAIE,MAAA,QAAQ,MAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAQE;AAAG,MAAA,SAAS,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAaE;AAAI,MAAA,OAAO,EAAE,MAAM,KAAKsC,YAAL,EAAnB;AACE,MAAA,SAAS,EAAC,OADZ;AACoB,kBAAS,gBAD7B;AAC8C,oBAAW,OADzD;AACiE,qBAAY,OAD7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AAAK,MAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CAFF,CAbF,CAFJ,CADF,CAvGF,CADF;AAoID;;AAjN8B;;AAoNjC,eAAe5C,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport api from '../../../../services/api'\n\nclass OrderList extends Component{\n\n  state = {\n    orders: [],\n    users: [],\n    contagem: '',\n    detalha: [],\n  }\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  async componentDidMount() {\n    const res = await api.get('/auth/user')\n    const response = await api.get('/auth/order')\n    if(response) {\n      this.setState({\n          orders: response.data,\n          contagem: response.data\n      })\n      this.setState({\n        users: res.data\n      })\n    }\n  }\n\n  async detalhaProduto(order_id) {\n    const response = await api.get(`/auth/order/${order_id}`);\n      if(response) {\n        this.setState({\n          detalha: response.data\n        })\n      }\n      console.log(this.state.detalha)\n  }\n\n  async entrega(orderId) {\n    const id = orderId;\n    const motivo = await api.post(`/auth/order/${id}`,{\n      motivo: this.state.motivo,\n      status: \"DELIVERED\"\n    })\n\n    if(motivo) {\n      const payload = await api.get('/auth/order')\n      if(payload) {\n        this.setState({\n            orders: payload.data\n        })\n      }       \n    }\n  }\n\n  async deletaOrder (orderId){\n    const id = orderId;\n    console.log(this.state.motivo)\n    const motivo = await api.post(`/auth/order/${id}`,{\n      motivo: this.state.motivo,\n      status: \"CANCELED\"\n    })\n\n    const apaga = await api.delete(`/auth/order/${id}`);\n    if(apaga && motivo) {\n      const payload = await api.get('/auth/order')\n      if(payload) {\n        this.setState({\n            orders: payload.data\n        })\n      }       \n    }\n  }\n \n  render() {\n    const { users, orders, detalha } = this.state;\n    return(\n      <div className=\"home\">\n        <ReactTooltip place=\"right\" type=\"dark\" effect=\"solid\"/>\n\n        <div className=\"col s12\"><h3>Central de pedidos</h3></div>\n        <div className=\"col s6 left\">\n          <table className=\"highlight\">\n            <thead>\n              <tr>\n                <th>Pedido</th>\n                <th>Cliente</th>\n                <th>Forma Pagamento</th>\n                <th>Total R$</th>\n                <th>Troco R$</th>\n                <th>Ações</th>\n              </tr>\n            </thead>\n            <tbody>\n\n            {orders.map( (order) => (\n              order.status === 'PENDING' ?\n              <tr key={order.id}>\n                  <td>0{order.id}</td>\n                    {users\n                    .filter(users => users.id === order.user_id)\n                    .map(users => (\n                      <td key={users.id}>{users.name}</td>\n                    ))}\n                  <td>{order.status}</td>\n                  <td>{(order.change).toLocaleString('pt-br', {style: 'currency', currency: 'BRL'})}</td>\n                  <td>{(order.change).toLocaleString('pt-br', {style: 'currency', currency: 'BRL'})}</td>\n                  <td>\n                  <a onClick={() => this.detalhaProduto(order.id)} \n                    rel=\"modal:open\" href=\"#detalha\" data-id={order.id} data-tip=\"Detalhes\" data-place=\"left\" data-effect=\"solid\">\n                    <div className=\"btn-flat corPadrao darken-4\">\n                      <i className=\"material-icons white-text\">more</i>\n                    </div>\n                  </a>\n                  &nbsp;\n                  <a  onClick={() => this.entrega(order.id)}  \n                    data-tip=\"Entregar\" data-place=\"bottom\" data-effect=\"solid\">\n                    <div className=\"btn-flat corPadrao darken-4\">\n                      <i className=\"material-icons white-text\">motorcycle</i>\n                    </div>\n                  </a>\n                  &nbsp;\n                  &nbsp;\n                  <a rel=\"modal:open\" href=\"#cancela\" data-id={order.id} data-tip=\"Cancelar Pedido\" data-place=\"right\" data-effect=\"solid\">\n                    <div className=\"btn-flat corPadrao darken-4\">\n                      <i className=\"material-icons white-text\">cancel</i>\n                    </div>\n                  </a>\n                </td>\n              </tr>\n              : '' \n            ))}\n            \n\n            </tbody>\n          </table>\n        </div>\n        <div className=\"col s6 right\">\n          <div className=\"card ajuste\">\n            <p>Pedidos Aguardando Entrega!</p> \n            <br />\n            <p className=\"bolinha\">0 {this.state.orders.status === 'PENDING' ? \"020\" : \"021\"}</p>\n          </div>\n        </div>\n\n\n        {/* detalhamento de pedido */}\n        <div className=\"modal tamanho\" id=\"detalha\">\n          <div>\n              <p>Detalhes do Pedido</p>\n          </div>\n          <div>\n            <div className=\"tabelinha\">\n            <table className=\"striped\">\n              <thead>\n                <tr>\n                  <th>Produto</th>\n                  <th>Quantidade</th>\n                  <th>Vlr Unit.</th>\n                </tr>\n              </thead>\n              <tbody>\n\n                {this.state.detalha == '' ? '' : \n                  detalha.products.map(d => (\n                    <tr key={d.id}>\n                      <td>{d.name}</td>\n                      <td>{d.description}</td>\n                      <td>{d.price}</td>\n                    </tr>\n                  ))\n                }                \n              </tbody>\n            </table>\n          </div>\n         \n          </div>\n        </div>\n\n        {/* cancelmento de pedido */}\n        <div className=\"modal tamanho\" id=\"cancela\">\n          <div>\n              <p>Cancelar Pedido Nº 574</p>\n              <div className=\"input-field col s12\">\n                <i className=\"material-icons prefix\">cancel</i>\n                  <textarea className=\"validate\" \n                    name=\"motivo\"\n                    value={this.state.motivo}\n                    onChange={this.handleChange}\n                    required\n                  />\n                <p className=\"active\">Motivo do Cancelamento</p>\n                <br />\n\n                \n                \n                <a  onClick={() => this.deletaOrdera()}\n                  className=\"right\" data-tip=\"Cancelar Agora\" data-place=\"right\" data-effect=\"solid\">\n                  <div className=\"btn-flat corPadrao darken-4\">\n                    <i className=\"material-icons white-text\">cancel</i>\n                  </div>\n                </a>\n              </div>\n          </div>\n        </div>\n\n      </div>\n    )\n  }\n}\n\nexport default OrderList"]},"metadata":{},"sourceType":"module"}