{"ast":null,"code":"var _jsxFileName = \"/home/belinglima/MEGAsync/TCC/Projetos/WEB/src/pages/SignIn/index.js\";\nimport React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Logo from \"../../assets/logo.png\";\nimport api from \"../../services/api\";\nimport { login, logout } from \"../../services/auth\";\nimport AddToHomescreen from 'react-add-to-homescreen';\nimport PropTypes from 'prop-types';\nimport { isIos, isInStandaloneMode } from './utils';\nimport { Form, Container } from \"./styles\";\n\nclass SignIn extends Component {\n  constructor(...args) {\n    super(...args);\n    this.propTypes = {\n      onAddToHomescreenClick: PropTypes.func,\n      title: PropTypes.string,\n      icon: PropTypes.string\n    };\n    this.state = {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      bannerVisible: true\n    };\n\n    this.onAddToHomescreenClick = () => {\n      this.props.onAddToHomescreenClick();\n    };\n\n    this.handleCloseBannerBtnClick = () => this.setState({\n      bannerVisible: false\n    });\n\n    this.handleSignIn = async e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            email = _this$state.email,\n            password = _this$state.password;\n\n      if (!email || !password) {\n        this.setState({\n          error: \"Preencha e-mail e senha para continuar!\"\n        });\n      } else {\n        try {\n          const response = await api.post(\"/sessions\", {\n            email,\n            password\n          });\n          login(response.data.token);\n          this.props.history.push(\"/app\");\n        } catch (err) {\n          this.setState({\n            error: \"Houve um problema com o login.\"\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          title = _this$props.title,\n          icon = _this$props.icon;\n    const bannerVisible = this.state.bannerVisible;\n    const shouldRender = bannerVisible && isIos() && !isInStandaloneMode();\n    logout();\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSignIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: Logo,\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), this.state.error && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"input\", {\n      type: \"email\",\n      placeholder: \"Endere\\xE7o de e-mail\",\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"Senha\",\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Entrar\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Registrar\"), shouldRender ? React.createElement(\"div\", {\n      className: \"add-to-home-banner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"add-to-home-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, icon ? React.createElement(\"img\", {\n      className: \"add-to-home-icon\",\n      src: icon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }) : null, React.createElement(\"div\", {\n      className: \"add-to-home-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: this.onAddToHomescreenClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, title || 'Add to home screen'))), React.createElement(MdClose, {\n      className: \"add-to-home-close-btn\",\n      onClick: this.handleCloseBannerBtnClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })) : null));\n  }\n\n}\n\nexport default withRouter(SignIn);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/WEB/src/pages/SignIn/index.js"],"names":["React","Component","Link","withRouter","Logo","api","login","logout","AddToHomescreen","PropTypes","isIos","isInStandaloneMode","Form","Container","SignIn","propTypes","onAddToHomescreenClick","func","title","string","icon","state","email","password","error","bannerVisible","props","handleCloseBannerBtnClick","setState","handleSignIn","e","preventDefault","response","post","data","token","history","push","err","render","shouldRender","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Logo from \"../../assets/logo.png\";\nimport api from \"../../services/api\";\nimport { login,logout } from \"../../services/auth\";\nimport AddToHomescreen from 'react-add-to-homescreen';\nimport PropTypes from 'prop-types';\nimport { isIos, isInStandaloneMode } from './utils';\n\nimport { Form, Container } from \"./styles\";\n\nclass SignIn extends Component {\n  propTypes = {\n    onAddToHomescreenClick: PropTypes.func,\n    title: PropTypes.string,\n    icon: PropTypes.string,\n  };\n\n  state = {\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    bannerVisible: true\n  };\n\n  onAddToHomescreenClick = () => {\n    this.props.onAddToHomescreenClick();\n  };\n\n  handleCloseBannerBtnClick = () => this.setState({ bannerVisible: false });\n\n  handleSignIn = async e => {\n    e.preventDefault();\n    const { email, password } = this.state;\n    if (!email || !password) {\n      this.setState({ error: \"Preencha e-mail e senha para continuar!\" });\n    } else {\n      try {\n        const response = await api.post(\"/sessions\", { email, password });\n        login(response.data.token);\n        this.props.history.push(\"/app\");\n        \n      } catch (err) {\n        this.setState({\n          error:\n            \"Houve um problema com o login.\"\n        });\n      }\n    }\n  };\n\n  render() {\n    const { title, icon } = this.props;\n    const { bannerVisible } = this.state;\n    const shouldRender = bannerVisible && isIos() && !isInStandaloneMode();\n\n\tlogout();\n    return (\n      <Container>\n        <Form onSubmit={this.handleSignIn}>\n        <img src={Logo} alt=\"logo\" />\n          {this.state.error && <p>{this.state.error}</p>}\n          <input\n            type=\"email\"\n            placeholder=\"EndereÃ§o de e-mail\"\n            onChange={e => this.setState({ email: e.target.value })}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Senha\"\n            onChange={e => this.setState({ password: e.target.value })}\n          />\n          <button type=\"submit\">Entrar</button>\n          <hr />\n          <Link to=\"/signup\">Registrar</Link>\n         \n          {shouldRender ? (\n          <div className=\"add-to-home-banner\">\n            <div className=\"add-to-home-content\">\n              {icon ? <img className=\"add-to-home-icon\" src={icon} /> : null}\n              <div className=\"add-to-home-text\">\n                <a onClick={this.onAddToHomescreenClick}>\n                  {title || 'Add to home screen'}\n                </a>\n              </div>\n            </div>\n            <MdClose\n              className=\"add-to-home-close-btn\"\n              onClick={this.handleCloseBannerBtnClick}\n            />\n          </div>\n        ) : null}\n\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(SignIn);\n"]},"metadata":{},"sourceType":"module"}