{"ast":null,"code":"import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import swal from'sweetalert';import api from'../../../../services/api';var UserList=/*#__PURE__*/function(_Component){_inherits(UserList,_Component);function UserList(){var _getPrototypeOf2;var _this;_classCallCheck(this,UserList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(UserList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={error:null,users:[],response:{},msg:'',ativo:'',inativo:'',showStore:false};return _this;}_createClass(UserList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get('/auth/user');case 2:response=_context.sent;// console.log(response.data)\nif(response){this.setState({users:response.data});}case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"vay\",value:function(){var _vay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId){var id,res,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=userId;_context2.next=3;return api.delete(\"/auth/user/\".concat(id));case 3:res=_context2.sent;if(!res){_context2.next=9;break;}_context2.next=7;return api.get('/auth/user');case 7:payload=_context2.sent;if(payload){this.setState({users:payload.data});}case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function vay(_x){return _vay.apply(this,arguments);}return vay;}()},{key:\"deleteUser\",value:function deleteUser(UserId,userName){var _this2=this;swal({title:\"Deletar usuário?\",text:userName,icon:\"warning\",dangerMode:true,buttons:[\"Cancelar\",\"Deletar\"]}).then(function(willDelete){if(willDelete){_this2.vay(UserId);}});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,error=_this$state.error,users=_this$state.users;var filtro=document.getElementById('search');var tabela=document.getElementById('datatable');if(filtro!=null){filtro.onkeyup=function(){var nomeFiltro=filtro.value;for(var i=1;i<tabela.rows.length;i++){var conteudoCelula=tabela.rows[i].cells[0].innerText;var corresponde=conteudoCelula.indexOf(nomeFiltro)>=0;tabela.rows[i].style.display=corresponde?'':'none';}};}if(error){return React.createElement(\"div\",null,\"Error: \",error);}else{return React.createElement(\"div\",{className:\"home\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col right\"},React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/AddUser\");},className:\"btn-flat btn-medium corPadrao right \"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"add\")))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col s12\"},React.createElement(\"div\",{className:\"card material-table\"},React.createElement(\"div\",{className:\"dataTabless_filter\"},React.createElement(\"label\",null,\"Busca de Usuarios:\",React.createElement(\"input\",{type:\"search\",id:\"search\",placeholder:\"\",\"aria-controls\":\"datatable\"}))),React.createElement(\"table\",{id:\"datatable\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Nome\"),React.createElement(\"th\",null,\"E-Mail\"),React.createElement(\"th\",null,\"Ativo\"),React.createElement(\"th\",null,\"A\\xE7\\xF5es\"))),React.createElement(\"tbody\",null,users.map(function(users){return React.createElement(\"tr\",{key:users.id},React.createElement(\"td\",null,users.name),React.createElement(\"td\",null,users.email),React.createElement(\"td\",null,users.active===1?'Ativo':'Inativo'),React.createElement(\"td\",null,React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/user/\".concat(users.id));}},React.createElement(\"div\",{className:\"btn-flat corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"edit\"))),\"\\xA0\",React.createElement(\"a\",{onClick:function onClick(){return _this3.deleteUser(users.id,users.name);}},React.createElement(\"div\",{className:\"btn-flat corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"delete\")))));})))))));}}}]);return UserList;}(Component);export default withRouter(UserList);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/github-Salomao/web/src/pages/App/components/user/UserList.js"],"names":["React","Component","withRouter","swal","api","UserList","state","error","users","response","msg","ativo","inativo","showStore","get","setState","data","userId","id","delete","res","payload","UserId","userName","title","text","icon","dangerMode","buttons","then","willDelete","vay","filtro","document","getElementById","tabela","onkeyup","nomeFiltro","value","i","rows","length","conteudoCelula","cells","innerText","corresponde","indexOf","style","display","props","history","push","map","name","email","active","deleteUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter} from 'react-router-dom'\n\nimport swal from 'sweetalert';\nimport api from '../../../../services/api'\n\nclass UserList extends Component {\n  state = {\n      error: null,\n      users: [],\n      response: {},\n      msg: '',\n      ativo: '',\n      inativo: '',\n      showStore: false\n  }\n  \n  async componentDidMount() {\n    const response = await api.get('/auth/user')\n    // console.log(response.data)\n    if(response) {\n        this.setState({\n            users: response.data\n        })\n    }   \n   \n  }\n\n  async vay(userId) {\n    const id = userId;\n    const res = await api.delete(`/auth/user/${id}`);\n    if(res) {\n      const payload = await api.get('/auth/user')\n      if(payload) {\n          this.setState({\n              users: payload.data\n          })\n      }       \n    }\n  }\n\n  deleteUser(UserId, userName) {  \n    swal({\n      title: \"Deletar usuário?\",\n      text: userName,\n      icon: \"warning\",\n      dangerMode: true,\n      buttons: [\"Cancelar\", \"Deletar\"],\n    }).then((willDelete) => {\n      if (willDelete) {\n        this.vay(UserId)\n      } \n    });\n  }\n\n  render() {\n    const { error, users } = this.state;\n\n    const filtro = document.getElementById('search');\n    const tabela = document.getElementById('datatable');\n    if (filtro != null){\n        filtro.onkeyup = function() {\n        var nomeFiltro = filtro.value;\n            for (var i = 1; i < tabela.rows.length; i++) {\n                var conteudoCelula = tabela.rows[i].cells[0].innerText;\n                var corresponde = conteudoCelula.indexOf(nomeFiltro) >= 0;\n                tabela.rows[i].style.display = corresponde ? '' : 'none';\n            }\n        };\n    }\n\n    if(error) {\n      return (\n        <div>Error: {error}</div>\n      )\n    } else {\n      return(\n        <div className=\"home\">\n          \n          <div className=\"row\">\n          {/* <div id=\"myDIV\" style={{display: this.state.showStore ? 'block' : 'none' }}> */}\n          {/* </div> */}\n            <div className=\"col right\">\n              <a onClick={() => this.props.history.push(`/AddUser`)} \n                className=\"btn-flat btn-medium corPadrao right \">\n                <i className=\"material-icons white-text\">add</i>\n              </a>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div  className=\"col s12\">\n              <div className=\"card material-table\">     \n              <div className=\"dataTabless_filter\">\n                <label>Busca de Usuarios:<input type=\"search\" id=\"search\" placeholder=\"\" aria-controls=\"datatable\" />\n                </label>\n              </div>\n              <table id=\"datatable\">\n              <thead>\n                <tr>\n                  <th>Nome</th>\n                  <th>E-Mail</th>\n                  <th>Ativo</th>\n                  <th>Ações</th>\n                </tr>\n              </thead>\n              <tbody>\n              {users.map((users) => (  \n                <tr key={users.id}>\n                  <td>{users.name}</td>\n                  <td>{users.email}</td>\n                  <td>{users.active === 1 ? 'Ativo' : 'Inativo'}</td>\n                  <td>\n                    <a onClick={() => this.props.history.push(`/user/${users.id}`)}>\n                      <div className=\"btn-flat corPadrao darken-4\">\n\t\t\t\t          \t\t\t\t<i className=\"material-icons white-text\">edit</i>\n\t\t\t\t          \t\t</div>\n                    </a>\n                    &nbsp;\n                    <a  onClick={() => this.deleteUser(users.id, users.name)}>\n                        <div className=\"btn-flat corPadrao darken-4\">\n                          <i className=\"material-icons white-text\">delete</i>\n\t\t\t\t          \t\t\t</div>\n                    </a>\n                  </td>\n                </tr>\n              ))}\n             </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n\n          {/* {users.map((users) => (\n            <div className=\"col cardUsuario\" key={users.id}>\n              <div className=\"card\">\n                <div className=\"card-image\">\n                  <img className=\"card-img-top\" \n                    src={users.images[0] == null ? logo : users.images[0].url}  \n                    alt={'Foto de  '+users.name} \n                  />\n                  <a  onClick={() => this.deleteUser(users.id, users.name)}\n                    className=\"btn-floating halfway-fab waves-effect waves-light right corPadrao\">\n                    <i className=\"material-icons\">delete</i>\n                  </a>\n                  &nbsp;\n                  <a onClick={() => this.props.history.push(`/user/${users.id}`)}\n                      className=\"btn-floating btn-tail halfway-fab waves-effect left waves-light corPadrao\">\n                    <i className=\"material-icons\">edit</i>\n                  </a>\n                </div>\n                <div className=\"card-content\">\n                  <span className=\"card-header black-text\">{users.name}</span>\n                </div>\n              </div>\n            </div>\n          ))} */}\n\n        </div>\n      )\n    }\n  }\n}\n\nexport default withRouter(UserList);"]},"metadata":{},"sourceType":"module"}